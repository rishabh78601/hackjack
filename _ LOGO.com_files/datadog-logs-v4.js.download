!function(){"use strict";var e={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},t=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];Object.prototype.hasOwnProperty.call(e,n)||(n=e.log),t[n].apply(t,r)};function n(e,n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{return e.apply(void 0,r)}catch(e){t.error(n,e)}}}t.debug=console.debug.bind(console),t.log=console.log.bind(console),t.info=console.info.bind(console),t.warn=console.warn.bind(console),t.error=console.error.bind(console);var r,o=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},i=!1;function s(e){i=e}function a(e,t,n){var o=n.value;n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r?u(o):o;return n.apply(this,e)}}function u(e){return function(){return c(e,this,arguments)}}function c(t,n,o){try{return t.apply(n,o)}catch(t){if(f(e.error,t),r)try{r(t)}catch(t){f(e.error,t)}}}function f(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];i&&t.apply(void 0,o([e,"[MONITOR]"],n,!1))}function l(e,t){var n,r=window;return r.Zone&&"function"==typeof r.Zone.__symbol__&&(n=e[r.Zone.__symbol__(t)]),n||(n=e[t]),n}function d(e,t){return l(window,"setTimeout")(u(e),t)}var v=1e3,p=6e4;function h(e,t,n){var r,o,i=!n||void 0===n.leading||n.leading,s=!n||void 0===n.trailing||n.trailing,a=!1;return{throttled:function(){for(var n=[],u=0;u<arguments.length;u++)n[u]=arguments[u];a?r=n:(i?e.apply(void 0,n):r=n,a=!0,o=d((function(){s&&r&&e.apply(void 0,r),a=!1,r=void 0}),t))},cancel:function(){var e;e=o,l(window,"clearTimeout")(e),a=!1,r=void 0}}}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}function y(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,y)}function m(e){return 0!==e&&100*Math.random()<=e}function b(){}function w(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);var r=C(Object.prototype),o=C(Array.prototype),i=C(Object.getPrototypeOf(e)),s=C(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{r(),o(),i(),s()}}function C(e){var t=e,n=t.toJSON;return n?(delete t.toJSON,function(){t.toJSON=n}):b}function x(e,t){return-1!==e.indexOf(t)}function k(e){if(Array.from)return Array.from(e);var t=[];if(e instanceof Set)e.forEach((function(e){return t.push(e)}));else for(var n=0;n<e.length;n++)t.push(e[n]);return t}function S(e){return function(e){return"number"==typeof e}(e)&&e>=0&&e<=100}function E(e){return Object.keys(e).map((function(t){return e[t]}))}function _(e){return 0===Object.keys(e).length}function R(e,t){return e.slice(0,t.length)===t}function L(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}function T(e,t,n){void 0===n&&(n="");var r=e.charCodeAt(t-1),o=r>=55296&&r<=56319?t+1:t;return e.length<=o?e:"".concat(e.slice(0,o)).concat(n)}function O(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function B(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen:function(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen:function(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=B(o[i],t[i],n);return o}var s="object"===O(e)?e:{};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=B(s[a],t[a],n));return s}}function P(e){return B(void 0,e)}function M(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0,o=t;r<o.length;r++){var i=o[r];null!=i&&(e=B(e,i))}return e}var A=/[^\u0000-\u007F]/;function I(e){return A.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function q(e){void 0===e&&(e=I);var t,n={};return{getBytesCount:function(){return void 0===t&&(t=e(w(n))),t},get:function(){return n},add:function(e,r){n[e]=r,t=void 0},remove:function(e){delete n[e],t=void 0},set:function(e){n=e,t=void 0},getContext:function(){return P(n)},setContext:function(e){n=P(e),t=void 0},setContextProperty:function(e,r){n[e]=P(r),t=void 0},removeContextProperty:function(e){delete n[e],t=void 0},clearContext:function(){n={},t=void 0}}}var j,D=function(){function e(){this.buffer=[]}return e.prototype.add=function(e){this.buffer.push(e)>500&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach((function(e){return e()})),this.buffer.length=0},e}();function U(){return(new Date).getTime()}function N(){return U()}function F(){return performance.now()}function H(){return{relative:F(),timeStamp:N()}}function G(){return void 0===j&&(j=performance.timing.navigationStart),j}function z(){var e=L().DatadogEventBridge;if(e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,n){e.send(JSON.stringify({eventType:t,event:n}))}}}function V(e){var t;void 0===e&&(e=null===(t=L().location)||void 0===t?void 0:t.hostname);var n=z();return!!n&&n.getAllowedWebViewHosts().some((function(t){return e===t||(n=e,r=".".concat(t),n.slice(-r.length)===r);var n,r}))}function $(e){var t=g({},e);return["id","name","email"].forEach((function(e){e in t&&(t[e]=String(t[e]))})),t}var J,W,X;function Z(e,t,n,r){var o=new Date;o.setTime(o.getTime()+n);var i="expires=".concat(o.toUTCString()),s=r&&r.crossSite?"none":"strict",a=r&&r.domain?";domain=".concat(r.domain):"",u=r&&r.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(s).concat(a).concat(u)}function Y(e){return function(e,t){var n=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")).exec(e);return n?n[1]:void 0}(document.cookie,e)}function K(e,t){Z(e,"",0,t)}function Q(e){return!!W&&W.has(e)}function ee(){return W||new Set}function te(e){return ne(e,function(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}(window.location)).href}function ne(e,t){if(function(){if(void 0!==X)return X;try{var e=new URL("http://test/path");return X="http://test/path"===e.href}catch(e){X=!1}return X}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var n=document,r=n.createElement("a");if(void 0!==t){var o=(n=document.implementation.createHTMLDocument("")).createElement("base");o.href=t,n.head.appendChild(o),n.body.appendChild(r)}return r.href=e,r}var re="datadoghq.com",oe="ap1.datadoghq.com",ie={logs:"logs",rum:"rum",sessionReplay:"session-replay"},se={logs:"logs",rum:"rum",sessionReplay:"replay"};function ae(e,t,n){var r=function(e,t){var n="/api/v2/".concat(se[t]),r=e.proxy,o=e.proxyUrl;if(r){var i=te(r);return function(e){return"".concat(i,"?ddforward=").concat(encodeURIComponent("".concat(n,"?").concat(e)))}}var s=function(e,t){var n=e.site,r=void 0===n?re:n,o=e.internalAnalyticsSubdomain;if(o&&r===re)return"".concat(o,".").concat(re);var i=r.split("."),s=i.pop(),a=r!==oe?"".concat(ie[t],"."):"";return"".concat(a,"browser-intake-").concat(i.join("-"),".").concat(s)}(e,t);if(void 0===r&&o){var a=te(o);return function(e){return"".concat(a,"?ddforward=").concat(encodeURIComponent("https://".concat(s).concat(n,"?").concat(e)))}}return function(e){return"https://".concat(s).concat(n,"?").concat(e)}}(e,t);return{build:function(o,i,s){var a=function(e,t,n,r,o,i){var s=e.clientToken,a=e.internalAnalyticsSubdomain,u=["sdk_version:".concat("4.35.0"),"api:".concat(r)].concat(n);o&&Q("collect_flush_reason")&&u.push("flush_reason:".concat(o));i&&u.push("retry_count:".concat(i.count),"retry_after:".concat(i.lastFailureStatus));var c=["ddsource=browser","ddtags=".concat(encodeURIComponent(u.join(","))),"dd-api-key=".concat(s),"dd-evp-origin-version=".concat(encodeURIComponent("4.35.0")),"dd-evp-origin=browser","dd-request-id=".concat(y())];"rum"===t&&c.push("batch_time=".concat(N()));a&&c.reverse();return c.join("&")}(e,t,n,o,i,s);return r(a)},urlPrefix:r(""),endpointType:t}}var ue=/[^a-z0-9_:./-]/;function ce(e,n){var r=200-e.length-1;(n.length>r||ue.test(n))&&t.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var o=n.replace(/,/g,"_");return"".concat(e,":").concat(o)}function fe(e){var t=function(e){var t=e.env,n=e.service,r=e.version,o=e.datacenter,i=[];return t&&i.push(ce("env",t)),n&&i.push(ce("service",n)),r&&i.push(ce("version",r)),o&&i.push(ce("datacenter",o)),i}(e),n=function(e,t){return{logsEndpointBuilder:ae(e,"logs",t),rumEndpointBuilder:ae(e,"rum",t),sessionReplayEndpointBuilder:ae(e,"sessionReplay",t)}}(e,t),r=E(n).map((function(e){return e.urlPrefix})),o=function(e,t,n){if(!e.replica)return;var r=g({},e,{site:re,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:ae(r,"logs",n),rumEndpointBuilder:ae(r,"rum",n)};return t.push.apply(t,E(o).map((function(e){return e.urlPrefix}))),g({applicationId:e.replica.applicationId},o)}(e,r,t);return g({isIntakeUrl:function(e){return r.some((function(t){return 0===e.indexOf(t)}))},replica:o,site:e.site||re},n)}function le(e){var r,o,i;if(e&&e.clientToken){var s=null!==(r=e.sessionSampleRate)&&void 0!==r?r:e.sampleRate;if(void 0===s||S(s))if(void 0===e.telemetrySampleRate||S(e.telemetrySampleRate)){var a;if(void 0===e.telemetryConfigurationSampleRate||S(e.telemetryConfigurationSampleRate))return a=e.enableExperimentalFeatures,Array.isArray(a)&&(W||(W=new Set(a)),a.filter((function(e){return"string"==typeof e})).forEach((function(e){x(e,"-")&&t.warn("please use snake case for '".concat(e,"'")),W.add(e)}))),g({beforeSend:e.beforeSend&&n(e.beforeSend,"beforeSend threw an error:"),cookieOptions:de(e),sessionSampleRate:null!=s?s:100,telemetrySampleRate:null!==(o=e.telemetrySampleRate)&&void 0!==o?o:20,telemetryConfigurationSampleRate:null!==(i=e.telemetryConfigurationSampleRate)&&void 0!==i?i:5,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},fe(e));t.error("Telemetry Configuration Sample Rate should be a number between 0 and 100")}else t.error("Telemetry Sample Rate should be a number between 0 and 100");else t.error("Session Sample Rate should be a number between 0 and 100")}else t.error("Client Token is not configured, we will not send any data.")}function de(e){var t={};return t.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===J){for(var e="dd_site_test_".concat(y()),t=window.location.hostname.split("."),n=t.pop();t.length&&!Y(e);)n="".concat(t.pop(),".").concat(n),Z(e,"test",v,{domain:n});K(e,{domain:n}),J=n}return J}()),t}var ve="?";function pe(e){var t=[],n=ke(e,"stack"),r=String(e);return n&&R(n,r)&&(n=n.slice(r.length)),n&&n.split("\n").forEach((function(e){var n=function(e){var t=ye.exec(e);if(!t)return;var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=me.exec(t[2]);r&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]);return{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||ve,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}(e)||function(e){var t=be.exec(e);if(!t)return;return{args:[],column:t[3]?+t[3]:void 0,func:ve,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=we.exec(e);if(!t)return;return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||ve,line:+t[3],url:t[2]}}(e)||function(e){var t=Ce.exec(e);if(!t)return;var n=t[3]&&t[3].indexOf(" > eval")>-1,r=xe.exec(t[3]);n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0);return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||ve,line:t[4]?+t[4]:void 0,url:t[3]}}(e);n&&(!n.func&&n.line&&(n.func=ve),t.push(n))})),{message:ke(e,"message"),name:ke(e,"name"),stack:t}}var he="((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\w+\\.|\\/).*?)",ge="(?::(\\d+))",ye=new RegExp("^\\s*at (.*?) ?\\(".concat(he).concat(ge,"?").concat(ge,"?\\)?\\s*$"),"i"),me=new RegExp("\\((\\S*)".concat(ge).concat(ge,"\\)"));var be=new RegExp("^\\s*at ?".concat(he).concat(ge,"?").concat(ge,"??\\s*$"),"i");var we=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var Ce=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,xe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function ke(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var Se="agent",Ee="console",_e="logger",Re="network",Le="source",Te="report";function Oe(e){var t=Be(e);return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"(".concat(e.args.join(", "),")"):"",o=e.line?":".concat(e.line):"",i=e.line&&e.column?":".concat(e.column):"";t+="\n  at ".concat(n).concat(r," @ ").concat(e.url).concat(o).concat(i)})),t}function Be(e){return"".concat(e.name||"Error",": ").concat(e.message)}function Pe(){var e,t=new Error;if(!t.stack)try{throw t}catch(e){}return c((function(){var n=pe(t);n.stack=n.stack.slice(2),e=Oe(n)})),e}function Me(e,t){for(var n=e,r=[];(null==n?void 0:n.cause)instanceof Error&&r.length<10;){var o=pe(n.cause);r.push({message:n.cause.message,source:t,type:null==o?void 0:o.name,stack:o&&Oe(o)}),n=n.cause}return r.length?r:void 0}var Ae=function(){function e(e){this.onFirstSubscribe=e,this.observers=[]}return e.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}();function Ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=new Ae((function(){var t=e.map((function(e){return e.subscribe((function(e){return n.notify(e)}))}));return function(){return t.forEach((function(e){return e.unsubscribe()}))}}));return n}function qe(e,t,n,r){return je(e,[t],n,r)}function je(e,t,n,r){var o=void 0===r?{}:r,i=o.once,s=o.capture,a=o.passive,c=u(i?function(e){v(),n(e)}:n),f=a?{capture:s,passive:a}:s,d=l(e,"addEventListener");function v(){var n=l(e,"removeEventListener");t.forEach((function(t){return n.call(e,t,c,f)}))}return t.forEach((function(t){return d.call(e,t,c,f)})),{stop:v}}var De={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function Ue(e){var t,n=[];x(e,De.cspViolation)&&n.push(t=new Ae((function(){var e=u((function(e){t.notify(function(e){var t=De.cspViolation,n="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:De.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(n),stack:Ne(e.effectiveDirective,e.originalPolicy?"".concat(n,' of the policy "').concat(T(e.originalPolicy,100,"..."),'"'):"no policy",e.sourceFile,e.lineNumber,e.columnNumber)}}(e))}));return qe(document,"securitypolicyviolation",e).stop})));var r=e.filter((function(e){return e!==De.cspViolation}));return r.length&&n.push(function(e){var t=new Ae((function(){if(window.ReportingObserver){var n=u((function(e){return e.forEach((function(e){t.notify(function(e){var t=e.type,n=e.body;return{type:t,subtype:n.id,message:"".concat(t,": ").concat(n.message),stack:Ne(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)}}(e))}))})),r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}));return t}(r)),Ie.apply(void 0,n)}function Ne(e,t,n,r,o){return n&&Oe({name:e,message:t,stack:[{func:"?",url:n,line:r,column:o}]})}function Fe(e,n,r){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((function(e){return x(n,e)}))?"all"===e?n:(o=e,i=new Set,o.forEach((function(e){return i.add(e)})),k(i)):void t.error("".concat(r,' should be "all" or an array with allowed values "').concat(n.join('", "'),'"'));var o,i}var He=function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},Ge={debug:"debug",error:"error",info:"info",warn:"warn"},ze="console",Ve="http",$e=Object.keys(Ge),Je=function(){function e(e,t,n,r,o){void 0===n&&(n=Ve),void 0===r&&(r=Ge.debug),void 0===o&&(o={}),this.handleLogStrategy=e,this.handlerType=n,this.level=r,this.contextManager=q(),this.contextManager.set(g({},o,t?{logger:{name:t}}:void 0))}return e.prototype.log=function(e,t,n){void 0===n&&(n=Ge.info),this.handleLogStrategy({message:e,context:P(t),status:n},this)},e.prototype.debug=function(e,t){this.log(e,t,Ge.debug)},e.prototype.info=function(e,t){this.log(e,t,Ge.info)},e.prototype.warn=function(e,t){this.log(e,t,Ge.warn)},e.prototype.error=function(e,t){var n={error:{origin:_e}};this.log(e,M(n,t),Ge.error)},e.prototype.setContext=function(e){this.contextManager.set(e)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(e,t){this.contextManager.add(e,t)},e.prototype.removeContext=function(e){this.contextManager.remove(e)},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},He([a],e.prototype,"log",null),e}();function We(e,t){var n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}var Xe={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Ze(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||Y("datadog-synthetics-injects-rum"))}function Ye(){var e=window._DATADOG_SYNTHETICS_RESULT_ID||Y("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}var Ke,Qe="log",et="configuration",tt=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],nt=["ddog-gov.com"],rt={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function ot(e,t){var n,o=new Ae;return rt.telemetryEnabled=!x(nt,t.site)&&m(t.telemetrySampleRate),rt.telemetryConfigurationEnabled=rt.telemetryEnabled&&m(t.telemetryConfigurationSampleRate),Ke=function(t){if(rt.telemetryEnabled){var r=function(e,t){return M({type:"telemetry",date:N(),service:e,version:"4.35.0",source:"browser",_dd:{format_version:2},telemetry:t,experimental_features:k(ee())},void 0!==n?n():{})}(e,t);o.notify(r),We("telemetry",r)}},r=it,g(rt,{maxEventsPerPage:t.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(e){n=e},observable:o,enabled:rt.telemetryEnabled}}function it(e){st(g({type:Qe,status:"error"},function(e){if(e instanceof Error){var t=pe(e);return{error:{kind:t.name,stack:Oe(at(t))},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(w(e))}}(e)))}function st(e){Ke&&rt.sentEventCount<rt.maxEventsPerPage&&(rt.sentEventCount+=1,Ke(e))}function at(e){return e.stack=e.stack.filter((function(e){return!e.url||tt.some((function(t){return R(e.url,t)}))})),e}var ut=function(){function e(e,t,n,r,o,i){var s=this;this.request=e,this.batchMessagesLimit=t,this.batchBytesLimit=n,this.messageBytesLimit=r,this.flushTimeout=o,this.pageExitObservable=i,this.flushObservable=new Ae,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,i.subscribe((function(e){return s.flush(e.reason,s.request.sendOnExit)})),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(e,t){if(void 0===t&&(t=this.request.send),0!==this.bufferMessagesCount){var n=this.pushOnlyBuffer.concat(E(this.upsertBuffer)),r=this.bufferBytesCount;this.flushObservable.notify({bufferBytesCount:this.bufferBytesCount,bufferMessagesCount:this.bufferMessagesCount}),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,t({data:n.join("\n"),bytesCount:r,flushReason:e})}},e.prototype.addOrUpdate=function(e,n){var r=this.process(e),o=r.processedMessage,i=r.messageBytesCount;i>=this.messageBytesLimit?t.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB.")):(this.hasMessageFor(n)&&this.remove(n),this.willReachedBytesLimitWith(i)&&this.flush("batch_bytes_limit"),this.push(o,i,n),this.isFull()&&this.flush("batch_bytes_limit"))},e.prototype.process=function(e){var t=w(e);return{processedMessage:t,messageBytesCount:I(t)}},e.prototype.push=function(e,t,n){this.bufferMessagesCount>0&&(this.bufferBytesCount+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesCount+=t,this.bufferMessagesCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=I(t);this.bufferBytesCount-=n,this.bufferMessagesCount-=1,this.bufferMessagesCount>0&&(this.bufferBytesCount-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesCount+e+1>=this.batchBytesLimit},e.prototype.isFull=function(){return this.bufferMessagesCount===this.batchMessagesLimit||this.bufferBytesCount>=this.batchBytesLimit},e.prototype.flushPeriodically=function(){var e=this;d((function(){e.flush("batch_duration_limit"),e.flushPeriodically()}),this.flushTimeout)},e}(),ct=3145728;function ft(e,t,n,r,o){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?dt(e,t,n,{onSuccess:function(){return vt(0,t,n,r,o)},onFailure:function(){t.queuedPayloads.enqueue(e),lt(t,n,r,o)}}):t.queuedPayloads.enqueue(e)}function lt(e,t,n,r){2===e.transportStatus&&d((function(){dt(e.queuedPayloads.first(),e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=1e3,vt(1,e,t,n,r)},onFailure:function(){e.currentBackoffTime=Math.min(6e4,2*e.currentBackoffTime),lt(e,t,n,r)}})}),e.currentBackoffTime)}function dt(e,t,n,r){var o=r.onSuccess,i=r.onFailure;t.bandwidthMonitor.add(e),n(e,(function(n){t.bandwidthMonitor.remove(e),!function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||e.status>=500)}(n)?(t.transportStatus=0,o()):(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},i())}))}function vt(e,t,n,r,o){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(o({message:"Reached max ".concat(r," events size queued for upload: ").concat(3,"MiB"),source:Se,startClocks:H()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=pt();i.size()>0;)ft(i.dequeue(),t,n,r,o)}function pt(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:function(){return e[0]},dequeue:function(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:function(){return e.length},isFull:function(){return this.bytesCount>=ct}}}function ht(e,t,n){var r={transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:pt(),queueFullReported:!1},o=function(n,r){return function(e,t,n,r){var o=n.data,i=n.bytesCount,s=n.flushReason,a=n.retry;if(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&i<t){var c=e.build("fetch",s,a);fetch(c,{method:"POST",body:o,keepalive:!0,mode:"cors"}).then(u((function(e){return null==r?void 0:r({status:e.status,type:e.type})})),u((function(){yt(e.build("xhr",s,a),o,r)})))}else{yt(e.build("xhr",s,a),o,r)}}(e,t,n,r)};return{send:function(t){ft(t,r,o,e.endpointType,n)},sendOnExit:function(n){!function(e,t,n){var r=n.data,o=n.bytesCount,i=n.flushReason;if(navigator.sendBeacon&&o<t)try{var s=e.build("beacon",i);if(navigator.sendBeacon(s,r))return}catch(e){!function(e){gt||(gt=!0,it(e))}(e)}yt(e.build("xhr",i),r)}(e,t,n)}}}var gt=!1;function yt(e,t,n){var r=new XMLHttpRequest,o=u((function(){r.removeEventListener("loadend",o),null==n||n({status:r.status})}));r.open("POST",e,!0),r.addEventListener("loadend",o),r.send(t)}function mt(e,t,n,r,o){var i,s=a(t);function a(t){return new ut(ht(t,e.batchBytesLimit,n),e.batchMessagesLimit,e.batchBytesLimit,e.messageBytesLimit,e.flushTimeout,r)}return o&&(i=a(o)),{add:function(e,t){void 0===t&&(t=!0),s.add(e),i&&t&&i.add(e)}}}var bt=1/0,wt=function(){function e(e){var t=this;this.expireDelay=e,this.entries=[],this.clearOldContextsInterval=setInterval((function(){return t.clearOldContexts()}),6e4)}return e.prototype.add=function(e,t){var n=this,r={context:e,startTime:t,endTime:bt,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.entries.unshift(r),r},e.prototype.find=function(e){void 0===e&&(e=bt);for(var t=0,n=this.entries;t<n.length;t++){var r=n[t];if(r.startTime<=e){if(e<=r.endTime)return r.context;break}}},e.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===bt&&t.close(e)},e.prototype.findAll=function(e){return void 0===e&&(e=bt),this.entries.filter((function(t){return t.startTime<=e&&e<=t.endTime})).map((function(e){return e.context}))},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},e.prototype.clearOldContexts=function(){for(var e=F()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()},e}();var Ct,xt=144e5,kt=9e5,St=/^([a-z]+)=([a-z0-9-]+)$/,Et="&",_t="_dd_s",Rt=[];function Lt(e,t){var n;if(void 0===t&&(t=0),Ct||(Ct=e),e===Ct)if(t>=100)Bt();else{var r,o=At();if(Tt()){if(o.lock)return void Ot(e,t);if(r=y(),o.lock=r,Mt(o,e.options),(o=At()).lock!==r)return void Ot(e,t)}var i=e.process(o);if(Tt()&&(o=At()).lock!==r)Ot(e,t);else{if(i&&Pt(i,e.options),Tt()&&(!i||!It(i))){if((o=At()).lock!==r)return void Ot(e,t);delete o.lock,Mt(o,e.options),i=o}null===(n=e.after)||void 0===n||n.call(e,i||o),Bt()}}else Rt.push(e)}function Tt(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}function Ot(e,t){d((function(){Lt(e,t+1)}),10)}function Bt(){Ct=void 0;var e=Rt.shift();e&&Lt(e)}function Pt(e,t){It(e)?function(e){Z(_t,"",0,e)}(t):(e.expire=String(U()+kt),Mt(e,t))}function Mt(e,t){Z(_t,function(e){return(t=e,Object.keys(t).map((function(e){return[e,t[e]]}))).map((function(e){var t=e[0],n=e[1];return"".concat(t,"=").concat(n)})).join(Et);var t}(e),kt,t)}function At(){var e=Y(_t),t={};return function(e){return void 0!==e&&(-1!==e.indexOf(Et)||St.test(e))}(e)&&e.split(Et).forEach((function(e){var n=St.exec(e);if(null!==n){var r=n[1],o=n[2];t[r]=o}})),t}function It(e){return _(e)}function qt(e,t,n){var r=new Ae,o=new Ae,i=setInterval(u((function(){Lt({options:e,process:function(e){return f(e)?void 0:{}},after:a})})),1e3),s=function(){var e=At();if(f(e))return e;return{}}();function a(e){return f(e)||(e={}),c()&&(!function(e){return s.id!==e.id||s[t]!==e[t]}(e)?s=e:(s={},o.notify())),e}function c(){return void 0!==s[t]}function f(e){return(void 0===e.created||U()-Number(e.created)<xt)&&(void 0===e.expire||U()<Number(e.expire))}return{expandOrRenewSession:h((function(){var o;Lt({options:e,process:function(e){var r=a(e);return o=function(e){var r=n(e[t]),o=r.trackingType,i=r.isTracked;e[t]=o,i&&!e.id&&(e.id=y(),e.created=String(U()));return i}(r),r},after:function(e){o&&!c()&&function(e){s=e,r.notify()}(e),s=e}})}),1e3).throttled,expandSession:function(){Lt({options:e,process:function(e){return c()?a(e):void 0}})},getSession:function(){return s},renewObservable:r,expireObservable:o,stop:function(){clearInterval(i)}}}var jt=[];function Dt(e,t,n){!function(e){var t=Y(_t),n=Y("_dd"),r=Y("_dd_r"),o=Y("_dd_l");if(!t){var i={};n&&(i.id=n),o&&/^[01]$/.test(o)&&(i.logs=o),r&&/^[012]$/.test(r)&&(i.rum=r),Pt(i,e)}}(e);var r=qt(e,t,n);jt.push((function(){return r.stop()}));var o,i=new wt(144e5);function s(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return jt.push((function(){return i.stop()})),r.renewObservable.subscribe((function(){i.add(s(),F())})),r.expireObservable.subscribe((function(){i.closeActive(F())})),r.expandOrRenewSession(),i.add(s(),[0,G()][0]),o=je(window,["click","touchstart","keydown","scroll"],(function(){return r.expandOrRenewSession()}),{capture:!0,passive:!0}).stop,jt.push(o),function(e){var t=u((function(){"visible"===document.visibilityState&&e()})),n=qe(document,"visibilitychange",t).stop;jt.push(n);var r=setInterval(t,6e4);jt.push((function(){clearInterval(r)}))}((function(){return r.expandSession()})),{findActiveSession:function(e){return i.find(e)},renewObservable:r.renewObservable,expireObservable:r.expireObservable}}var Ut;function Nt(e){var t=Dt(e.cookieOptions,"logs",(function(t){return function(e,t){var n=function(e){return"0"===e||"1"===e}(t)?t:Ft(e);return{trackingType:n,isTracked:"1"===n}}(e,t)}));return{findTrackedSession:function(e){var n=t.findActiveSession(e);return n&&"1"===n.trackingType?{id:n.id}:void 0}}}function Ft(e){return m(e.sessionSampleRate)?"1":"0"}var Ht=((Ut={})[Ge.debug]=0,Ut[Ge.info]=1,Ut[Ge.warn]=2,Ut[Ge.error]=3,Ut);function Gt(e,t,n){var r=n.getHandler(),o=Array.isArray(r)?r:[r];return Ht[e]>=Ht[n.getLevel()]&&x(o,t)}function zt(e,t,n,r,o,i){var s=$e.concat(["custom"]),a={};s.forEach((function(e){var n,r,o,s,u;a[e]=(n=e,r=t.eventRateLimiterThreshold,o=i,s=0,u=!1,{isLimitReached:function(){if(0===s&&d((function(){s=0}),p),(s+=1)<=r||u)return u=!1,!1;if(s===r+1){u=!0;try{o({message:"Reached max number of ".concat(n,"s by minute: ").concat(r),source:Se,startClocks:H()})}finally{u=!1}}return!0}})})),n.subscribe(0,(function(i){var s,u,c,f=i.rawLogsEvent,l=i.messageContext,d=void 0===l?void 0:l,v=i.savedCommonContext,p=void 0===v?void 0:v,h=i.logger,g=void 0===h?o:h,y=f.date-G(),m=e.findTrackedSession(y);if(m){var b=p||r(),w=M({service:t.service,session_id:m.id,usr:_(b.user)?void 0:b.user,view:b.view},b.context,$t(y),f,g.getContext(),d);!Gt(f.status,Ve,g)||!1===(null===(s=t.beforeSend)||void 0===s?void 0:s.call(t,w))||(null===(u=w.error)||void 0===u?void 0:u.origin)!==Se&&(null!==(c=a[w.status])&&void 0!==c?c:a.custom).isLimitReached()||n.notify(1,w)}}))}var Vt=!1;function $t(t){var n,r=window;if(Ze()){var o=i(r.DD_RUM_SYNTHETICS);return o||Vt||(Vt=!0,function(t,n){f(e.debug,t,n),st(g({type:Qe,message:t,status:"debug"},n))}("Logs sent before RUM is injected by the synthetics worker",{testId:(n=window._DATADOG_SYNTHETICS_PUBLIC_ID||Y("datadog-synthetics-public-id"),"string"==typeof n?n:void 0),resultId:Ye()})),o}return i(r.DD_RUM);function i(e){if(e&&e.getInternalContext)return e.getInternalContext(t)}}var Jt,Wt={};function Xt(e){var t=e.map((function(e){return Wt[e]||(Wt[e]=function(e){var t=new Ae((function(){var n=console[e];return console[e]=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(console,r);var i=Pe();c((function(){t.notify(Zt(r,e,i))}))},function(){console[e]=n}}));return t}(e)),Wt[e]}));return Ie.apply(void 0,t)}function Zt(t,n,r){var o,i=t.map((function(e){return function(e){if("string"==typeof e)return e;if(e instanceof Error)return Be(pe(e));return w(e,void 0,2)}(e)})).join(" ");if(n===e.error){var s=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n))return r}}(t,(function(e){return e instanceof Error}));o=s?Oe(pe(s)):void 0,i="console error: ".concat(i)}return{api:n,message:i,stack:o,handlingStack:r}}var Yt,Kt=((Jt={})[e.log]=Ge.info,Jt[e.debug]=Ge.debug,Jt[e.info]=Ge.info,Jt[e.warn]=Ge.warn,Jt[e.error]=Ge.error,Jt);var Qt,en=((Yt={})[De.cspViolation]=Ge.error,Yt[De.intervention]=Ge.error,Yt[De.deprecation]=Ge.warn,Yt);function tn(e,t,n){var r=e[t],o=n(r),i=function(){if("function"==typeof o)return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=r:o=r}}}function nn(e,t,n){var r=n.before,o=n.after;return tn(e,t,(function(e){return function(){var t,n=arguments;return r&&c(r,this,n),"function"==typeof e&&(t=e.apply(this,n)),o&&c(o,this,n),t}}))}var rn,on=new WeakMap;function sn(){var e;return Qt||(e=new Ae((function(){var t=nn(XMLHttpRequest.prototype,"open",{before:an}).stop,n=nn(XMLHttpRequest.prototype,"send",{before:function(){un.call(this,e)}}).stop,r=nn(XMLHttpRequest.prototype,"abort",{before:cn}).stop;return function(){t(),n(),r()}})),Qt=e),Qt}function an(e,t){on.set(this,{state:"open",method:e,url:te(String(t))})}function un(e){var t=this,n=on.get(this);if(n){var r=n;r.state="start",r.startTime=F(),r.startClocks=H(),r.isAborted=!1,r.xhr=this;var o=!1,i=nn(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&s()}}).stop,s=u((function(){if(t.removeEventListener("loadend",s),i(),!o){o=!0;var a,u=n;u.state="complete",u.duration=(a=r.startClocks.timeStamp,N()-a),u.status=t.status,e.notify(g({},u))}}));this.addEventListener("loadend",s),e.notify(r)}}function cn(){var e=on.get(this);e&&(e.isAborted=!0)}function fn(){var e;return rn||(e=new Ae((function(){if(window.fetch)return tn(window,"fetch",(function(t){return function(n,r){var o,i=c(ln,null,[e,n,r]);return i?(o=t.call(this,i.input,i.init),c(dn,null,[e,o,i])):o=t.call(this,n,r),o}})).stop})),rn=e),rn}function ln(e,t,n){var r=n&&n.method||"object"==typeof t&&t.method||"GET",o=te("object"==typeof t&&t.url||t),i={state:"start",init:n,input:t,method:r,startClocks:H(),url:o};return e.notify(i),i}function dn(e,t,n){var r=function(t){var r=n;r.state="resolve","stack"in t||t instanceof Error?(r.status=0,r.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR,r.error=t):"status"in t&&(r.response=t,r.responseType=t.type,r.status=t.status,r.isAborted=!1),e.notify(r)};t.then(u(r),u(r))}function vn(e,t){if(!e.forwardErrorsToLogs)return{stop:b};var n=sn().subscribe((function(e){"complete"===e.state&&o("xhr",e)})),r=fn().subscribe((function(e){"resolve"===e.state&&o("fetch",e)}));function o(n,r){function o(e){t.notify(0,{rawLogsEvent:{message:"".concat(hn(n)," error ").concat(r.method," ").concat(r.url),date:r.startClocks.timeStamp,error:{origin:Re,stack:e||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url},status:Ge.error,origin:Re}})}e.isIntakeUrl(r.url)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!function(e){return e.status>=500}(r)||("xhr"in r?function(e,t,n){"string"==typeof e.response?n(pn(e.response,t)):n(e.response)}(r.xhr,e,o):r.response?function(e,t,n){var r=function(e){try{return e.clone()}catch(e){return}}(e);r&&r.body?window.TextDecoder?function(e,t,n){!function(e,t,n){var r=e.getReader(),o=[],i=0;function s(){var e,s;if(r.cancel().catch(b),n.collectStreamBody){var a;if(1===o.length)a=o[0];else{a=new Uint8Array(i);var u=0;o.forEach((function(e){a.set(e,u),u+=e.length}))}e=a.slice(0,n.bytesLimit),s=a.length>n.bytesLimit}t(void 0,e,s)}!function e(){r.read().then(u((function(t){t.done?s():(n.collectStreamBody&&o.push(t.value),(i+=t.value.length)>n.bytesLimit?s():e())})),u((function(e){return t(e)})))}()}(e,(function(e,t,r){if(e)n(e);else{var o=(new TextDecoder).decode(t);r&&(o+="..."),n(void 0,o)}}),{bytesLimit:t,collectStreamBody:!0})}(r.body,t.requestErrorResponseLengthLimit,(function(e,t){n(e?"Unable to retrieve response: ".concat(e):t)})):r.text().then(u((function(e){return n(pn(e,t))})),u((function(e){return n("Unable to retrieve response: ".concat(e))}))):n()}(r.response,e,o):r.error&&function(e,t,n){n(pn(Oe(pe(e)),t))}(r.error,e,o))}return{stop:function(){n.unsubscribe(),r.unsubscribe()}}}function pn(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function hn(e){return"xhr"===e?"XHR":"Fetch"}var gn=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function yn(e){var t=function(e){return nn(window,"onerror",{before:function(t,n,r,o,i){var s;if(i)s=pe(i),e(s,i);else{var a,u={url:n,column:o,line:r},c=t;if("[object String]"==={}.toString.call(t)){var f=gn.exec(c);f&&(a=f[1],c=f[2])}e(s={name:a,message:"string"==typeof c?c:void 0,stack:[u]},t)}}})}(e).stop,n=function(e){return nn(window,"onunhandledrejection",{before:function(t){var n=t.reason||"Empty reason",r=pe(n);e(r,n)}})}(e).stop;return{stop:function(){t(),n()}}}function mn(e){return yn((function(t,n){e.notify(function(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,o=e.startClocks,i=e.nonErrorPrefix,s=e.source,a=e.handling;return t&&(void 0!==t.message||n instanceof Error)?{startClocks:o,source:s,handling:a,originalError:n,message:t.message||"Empty message",stack:Oe(t),handlingStack:r,type:t.name,causes:Me(n,s)}:{startClocks:o,source:s,handling:a,originalError:n,message:"".concat(i," ").concat(w(n)),stack:"No stack, consider using an instance of Error",handlingStack:r,type:t&&t.name}}({stackTrace:t,originalError:n,startClocks:H(),nonErrorPrefix:"Uncaught",source:Le,handling:"unhandled"}))}))}var bn=function(){function e(){this.callbacks={}}return e.prototype.notify=function(e,t){var n=this.callbacks[e];n&&n.forEach((function(e){return e(t)}))},e.prototype.subscribe=function(e,t){var n=this;return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:function(){n.callbacks[e]=n.callbacks[e].filter((function(e){return t!==e}))}}},e}();var wn,Cn,xn,kn,Sn=function(n){var r,o,i=!1,a=q(),c=q(),f={},l=function(){},d=new D,v=function(e,t,n,r){void 0===n&&(n=P(y())),void 0===r&&(r=N()),d.add((function(){return v(e,t,n,r)}))},p=function(){},h=new Je((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v.apply(void 0,e)}));function y(){return{view:{referrer:document.referrer,url:window.location.href},context:a.getContext(),user:c.getContext()}}return r={logger:h,init:u((function(r){var o;if(p=function(){return P(r)},V()&&(r=function(e){return g({},e,{clientToken:"empty"})}(r)),function(e){return!i||(e.silentMultipleInit||t.error("DD_LOGS is already initialized."),!1)}(r)){var s=function(t){var n=le(t),r=Fe(t.forwardConsoleLogs,E(e),"Forward Console Logs"),o=Fe(t.forwardReports,E(De),"Forward Reports");if(n&&r&&o)return t.forwardErrorsToLogs&&!x(r,e.error)&&r.push(e.error),g({forwardErrorsToLogs:!1!==t.forwardErrorsToLogs,forwardConsoleLogs:r,forwardReports:o,requestErrorResponseLengthLimit:32768},n)}(r);s&&(o=n(r,s,y,h),v=o.handleLog,l=o.getInternalContext,d.drain(),i=!0)}})),getLoggerGlobalContext:u(a.get),getGlobalContext:u(a.getContext),setLoggerGlobalContext:u(a.set),setGlobalContext:u(a.setContext),addLoggerGlobalContext:u(a.add),setGlobalContextProperty:u(a.setContextProperty),removeLoggerGlobalContext:u(a.remove),removeGlobalContextProperty:u(a.removeContextProperty),clearGlobalContext:u(a.clearContext),createLogger:u((function(e,t){return void 0===t&&(t={}),f[e]=new Je((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return v.apply(void 0,e)}),e,t.handler,t.level,t.context),f[e]})),getLogger:u((function(e){return f[e]})),getInitConfiguration:u((function(){return p()})),getInternalContext:u((function(e){return l(e)})),setUser:u((function(e){(function(e){var n="object"===O(e);return n||t.error("Unsupported user:",e),n})(e)&&c.setContext($(e))})),getUser:u(c.getContext),setUserProperty:u((function(e,t){var n,r=$((n={},n[e]=t,n))[e];c.setContextProperty(e,r)})),removeUserProperty:u(c.removeContextProperty),clearUser:u(c.clearContext)},o=g({version:"4.35.0",onReady:function(e){e()}},r),Object.defineProperty(o,"_setDebug",{get:function(){return s},enumerable:!1}),o}((function(n,r,o,i){var s=new bn;s.subscribe(1,(function(e){return We("logs",e)}));var a,u=function(e){return s.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:Se},origin:Se,status:Ge.error}})},c=a=new Ae((function(){var e=Q("pagehide"),t=je(window,["visibilitychange","freeze","pagehide"],(function(t){"pagehide"===t.type&&e?a.notify({reason:Xe.PAGEHIDE}):"visibilitychange"===t.type&&"hidden"===document.visibilityState?a.notify({reason:Xe.HIDDEN}):"freeze"===t.type&&a.notify({reason:Xe.FROZEN})}),{capture:!0}).stop,n=b;return e||(n=qe(window,"beforeunload",(function(){a.notify({reason:Xe.UNLOADING})})).stop),function(){t(),n()}})),f=function(e,t,n){var r,o=ot("browser-logs-sdk",e);if(V()){var i=z();o.observable.subscribe((function(e){return i.send("internal_telemetry",e)}))}else{var s=mt(e,e.rumEndpointBuilder,t,n,null===(r=e.replica)||void 0===r?void 0:r.rumEndpointBuilder);o.observable.subscribe((function(t){return s.add(t,function(e){return"datad0g.com"===e.site}(e))}))}return o}(r,u,c);f.setContextProvider((function(){var e,t,n,r,o,i;return{application:{id:null===(e=$t())||void 0===e?void 0:e.application_id},session:{id:null===(t=v.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(r=null===(n=$t())||void 0===n?void 0:n.view)||void 0===r?void 0:r.id},action:{id:null===(i=null===(o=$t())||void 0===o?void 0:o.user_action)||void 0===i?void 0:i.id}}})),vn(r,s),function(e,t){if(!e.forwardErrorsToLogs)return{stop:b};var n=new Ae,r=mn(n).stop,o=n.subscribe((function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,origin:Le,stack:e.stack},origin:Le,status:Ge.error}})}))}(r,s),function(t,n){var r=Xt(t.forwardConsoleLogs).subscribe((function(t){n.notify(0,{rawLogsEvent:{date:N(),message:t.message,origin:Ee,error:t.api===e.error?{origin:Ee,stack:t.stack}:void 0,status:Kt[t.api]}})}))}(r,s),function(e,t){var n=Ue(e.forwardReports).subscribe((function(e){var n,r=e.message,o=en[e.type];o===Ge.error?n={kind:e.subtype,origin:Te,stack:e.stack}:e.stack&&(r+=" Found in ".concat(function(e){var t;return null===(t=/@ (.+)/.exec(e))||void 0===t?void 0:t[1]}(e.stack))),t.notify(0,{rawLogsEvent:{date:N(),message:r,origin:Te,error:n,status:o}})}))}(r,s);var l,d=function(e){return{handleLog:function(n,r,o,i){var s=n.context;Gt(n.status,ze,r)&&t(n.status,n.message,M(r.getContext(),s)),e.notify(0,{rawLogsEvent:{date:i||N(),message:n.message,status:n.status,origin:_e},messageContext:s,savedCommonContext:o,logger:r})}}}(s).handleLog,v=!function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var n="dd_cookie_test_".concat(y()),r="test";Z(n,r,p,e);var o=Y(n)===r;return K(n,e),o}catch(e){return t.error(e),!1}}(r.cookieOptions)||V()||Ze()?function(e){var t="1"===Ft(e)?{}:void 0;return{findTrackedSession:function(){return t}}}(r):Nt(r);return zt(v,r,s,o,i,u),V()?function(e){var t=z();e.subscribe(1,(function(e){t.send("log",e)}))}(s):function(e,t,n,r){var o,i=mt(e,e.logsEndpointBuilder,n,r,null===(o=e.replica)||void 0===o?void 0:o.logsEndpointBuilder);t.subscribe(1,(function(e){i.add(e)}))}(r,s,u,c),function(e){rt.telemetryConfigurationEnabled&&st({type:et,configuration:e})}(function(e){var t=function(e){var t,n,r=null!==(t=e.proxy)&&void 0!==t?t:e.proxyUrl;return{session_sample_rate:null!==(n=e.sessionSampleRate)&&void 0!==n?n:e.sampleRate,telemetry_sample_rate:e.telemetrySampleRate,telemetry_configuration_sample_rate:e.telemetryConfigurationSampleRate,use_before_send:!!e.beforeSend,use_cross_site_session_cookie:e.useCrossSiteSessionCookie,use_secure_session_cookie:e.useSecureSessionCookie,use_proxy:void 0!==r?!!r:void 0,silent_multiple_init:e.silentMultipleInit,track_session_across_subdomains:e.trackSessionAcrossSubdomains,track_resources:e.trackResources,track_long_task:e.trackLongTasks}}(e);return g({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports},t)}(n)),{handleLog:d,getInternalContext:(l=v,{get:function(e){var t=l.findTrackedSession(e);if(t)return{session_id:t.id}}}).get}}));wn=L(),xn=Sn,kn=wn[Cn="DD_LOGS"],wn[Cn]=xn,kn&&kn.q&&kn.q.forEach((function(e){return n(e,"onReady callback threw an error:")()}))}();